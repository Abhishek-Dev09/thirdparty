env:
    global:
        - PLAT=x86_64
        - MB_PYTHON_OSX_VER=10.9
        - UNICODE_WIDTH=32

    matrix:
        - WHEEL_TO_BUILD: pyahocorasick
#        - WHEEL_TO_BUILD: intbitset
#        - WHEEL_TO_BUILD: bitarray
#        - WHEEL_TO_BUILD: lxml
#        - WHEEL_TO_BUILD: tinyarray
#        - WHEEL_TO_BUILD: simplejson
#        - WHEEL_TO_BUILD: billiard
#        - WHEEL_TO_BUILD: psutil
#        - WHEEL_TO_BUILD: pycryptodome
#        - WHEEL_TO_BUILD: rdflib
#        - WHEEL_TO_BUILD: scandir
        - WHEEL_TO_BUILD: pyyaml==3.12
#        - WHEEL_TO_BUILD: pyyaml
#        - WHEEL_TO_BUILD: cdifflib
#        - WHEEL_TO_BUILD: pyroaring
#        - WHEEL_TO_BUILD: edlib
#        - WHEEL_TO_BUILD: hyperscan


language: python
# The Travis Python version is unrelated to the version we build and test
# with.  This is set with the MB_PYTHON_VERSION variable. 
python: 3.5
dist: trusty
services: docker

matrix:
  exclude:
    # Exclude the default Python 3.5 build
    - python: 3.5

  include:
    - os: linux
      env: 
        - MB_PYTHON_VERSION=2.7
        - UNICODE_WIDTH=16
    - os: linux
      env:
        - MB_PYTHON_VERSION=2.7
    - os: linux
      env:
        - MB_PYTHON_VERSION=3.6

    - os: osx
      language: generic
      env:
        - MB_PYTHON_VERSION=2.7
        - MB_PYTHON_OSX_VER=10.9
        - UNICODE_WIDTH=16
    - os: osx
      language: generic
      env:
        - MB_PYTHON_VERSION=2.7
        - MB_PYTHON_OSX_VER=10.9
    - os: osx
      language: generic
      env:
        - MB_PYTHON_VERSION=3.6
        - MB_PYTHON_OSX_VER=10.9


before_install:
    - source multibuild/common_utils.sh
    - source multibuild/travis_steps.sh
    - before_install

install:
    - ls -al ${TRAVIS_BUILD_DIR}/wheelhouse/

script:
    - build_index_wheel $WHEEL_TO_BUILD


deploy:
  provider: bintray
  skip_cleanup: true
  file: bintray_travis.json
  user: pombreda
  key:
    secure: l8uNfriu2L+rHRRBsR8R6pGHFt+r1Rymfk+1pOKdJTR8NjgBAYEAxPU6IPr+drH1WheXGVFoWttWTcplvo8Xmc+skUMXKUnjNCgrRE0rYKqjdHmEBMKUAjAfZ3hq48ayjRm3FvAjPwcWbTD0siBjK1qm4SD7TBEEC28XuJhT1oE=

